<h1>Test OAuth Client for APIcast v2</h1>

<p>
This is a simple Client to use with APIcast to request an access token for example and testing purposes. 
</p>

<h2>Step 1: Request Authorization Code</h2>

<form method="get" action="<%= AUTHORIZE_ENDPOINT %>">
	<input type="hidden" name="state" value="<%= UUID.new.generate %>" />
  	<input type="hidden" name="response_type" value="code" />
  	<label>Client ID: </label>
  	<input type="text" name="client_id" value="<%= defined?(CLIENT_ID) ? CLIENT_ID : '' %>" />
    <label>Redirect URL: </label>
  	<input type="text" name="redirect_uri" value="<%= defined?(REDIRECT_URI) ? REDIRECT_URI : '' %>" />
  	<label>Scope: </label>
  	<input type="text" name="scope" />
	<input type="submit" value="Authorize" />
</form>

<h2>Step 2: Exchange Authorization Code for Access Token</h2>

<form method="post" action="<%= TOKEN_ENDPOINT %>">
	<label>Authorization Code: </label>
  	<input type="text" name="code" value="<%= defined?(@code) ? @code : '' %>" />
  	<label>Client ID: </label>
  	<input type="text" name="client_id" value="<%= defined?(CLIENT_ID) ? CLIENT_ID : '' %>" />
  	<label>Client Secret: </label>
  	<input type="text" name="client_secret" value="<%= defined?(CLIENT_SECRET) ? CLIENT_SECRET : '' %>" />
  	<input type="hidden" name="grant_type" value="authorization_code" />
  	<label>Redirect URL: </label>
  	<input type="text" name="redirect_uri" value="<%= defined?(REDIRECT_URI) ? REDIRECT_URI : '' %>" />
	<input type="submit" value="Get Token">
</form>