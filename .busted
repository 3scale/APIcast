local path = require('pl.path')
local root = path.currentdir()

local ci = os.getenv('CI')

local all = {
  helper = path.join(root, 'spec/spec_helper.lua'),
}
local default = {
  verbose = true,
  ['shuffle-tests'] = true,
  ['shuffle-files'] = true,

  -- src/?/policy.lua allows us to require apicast.policy.apolicy
  lpath = path.join(root, 'spec/?.lua;')  .. path.join(root, 'gateway/src/?.lua;gateway/src/?/policy.lua'),
}

if ci then
    default.output = 'junit'
    default.Xoutput = 'tmp/junit/busted.xml'
end

return {
  _all = all,
  default = default,
}
